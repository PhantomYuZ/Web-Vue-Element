"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[516],{9516:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-container",{staticStyle:{height:"650px",border:"1px solid #eee"}},[t("el-header",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","font-size":"24px","background-color":"rgb(84, 92, 100)"}},[e._v(" 教务管理系统 "),t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-setting"})]),t("el-dropdown-menu",{staticClass:"dropdown-menu"},[t("el-dropdown-item",{attrs:{divided:""}},[e._v("用户姓名："+e._s(e.userData.name))]),t("el-dropdown-item",{attrs:{divided:""}},[e._v("用户工号："+e._s(e.userData.uno))]),t("el-dropdown-item",{staticStyle:{"font-weight":"bold"},attrs:{divided:""}},["student"===e.userData.role?t("span",[e._v("用户类型：学生")]):"teacher"===e.userData.role?t("span",[e._v("用户类型：教师")]):"manager"===e.userData.role?t("span",[e._v("用户类型：管理员")]):e._e()]),t("el-dropdown-item",{staticStyle:{color:"red"},attrs:{divided:"",icon:"el-icon-switch-button",command:"logout"}},[e._v("退出登录")])],1),e._v(" "+e._s(e.userData.name)+" ")],1)],1),t("el-container",[t("el-aside",{staticStyle:{border:"1px solid #eee","background-color":"rgb(246, 243, 243)"},attrs:{width:"210px"}},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","unique-opened":!1,collapse:!1,"default-openeds":["2"]}},[t("el-menu-item",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),t("router-link",{attrs:{to:"/home",id:"sideForm"}},[e._v("首页")])],1)],2),t("el-submenu",{attrs:{index:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),e._v("学生信息管理")]),t("el-menu-item",{attrs:{index:"1-1"}},[t("router-link",{attrs:{to:"/StudentsInfo",id:"sideForm"}},[e._v(" 学生信息列表 ")])],1)],2),t("el-submenu",{attrs:{index:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),e._v("教师信息管理")]),t("el-menu-item",{attrs:{index:"2-1"}},[t("router-link",{attrs:{to:"/TeachersInfo",id:"sideForm"}},[e._v("教师信息管理")])],1)],2),"student"===e.userData.role?t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),e._v("课程管理")]),t("el-menu-item",{attrs:{index:"3-1"}},[t("router-link",{attrs:{to:"/AllCourses",id:"sideForm"}},[e._v("全部课程查询")])],1),t("el-menu-item",{attrs:{index:"3-2"}},[t("router-link",{attrs:{to:"/CoursesSelect",id:"sideForm"}},[e._v("学生选课")])],1),t("el-menu-item",{attrs:{index:"3-3"}},[t("router-link",{attrs:{to:"/GradesInfo",id:"sideForm"}},[e._v("成绩查询")])],1),t("el-menu-item",{attrs:{index:"3-4"}},[t("router-link",{attrs:{to:"/CoursesTable",id:"sideForm"}},[e._v("课程表系统")])],1)],2):e._e(),"teacher"===e.userData.role?t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),e._v("课程管理")]),t("el-menu-item",{attrs:{index:"3-1"}},[t("router-link",{attrs:{to:"/AllCourses",id:"sideForm"}},[e._v("全部课程查询")])],1),t("el-menu-item",{attrs:{index:"3-2"}},[t("router-link",{attrs:{to:"/CoursesByTeacher",id:"sideForm"}},[e._v("教师课程系统")])],1)],2):e._e(),"manager"===e.userData.role?t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),e._v("课程管理")]),t("el-menu-item",{attrs:{index:"3-1"}},[t("router-link",{attrs:{to:"/AllCourses",id:"sideForm"}},[e._v("全部课程查询")])],1),t("el-menu-item",{attrs:{index:"3-2"}},[t("router-link",{attrs:{to:"/CoursesByManager",id:"sideForm"}},[e._v("管理员课程系统")])],1)],2):e._e(),t("el-submenu",{attrs:{index:"5"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),e._v("用户信息")]),t("el-menu-item",{attrs:{index:"3-1"}},[t("router-link",{attrs:{to:"/UserInfo",id:"sideForm"}},[e._v("用户个人信息")])],1)],2)],1)],1),t("el-container",[t("el-main",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{label:"学号"}},[t("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.searchForm.sno,callback:function(t){e.$set(e.searchForm,"sno",t)},expression:"searchForm.sno"}})],1),t("el-form-item",{attrs:{label:"学生姓名"}},[t("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:e.searchForm.sname,callback:function(t){e.$set(e.searchForm,"sname",t)},expression:"searchForm.sname"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchStudentTable}},[e._v("查询")])],1)],1),t("br"),t("el-table",{ref:"studentTable",attrs:{data:e.paginatedStudentsData,border:""}},["manager"===e.userData.role?t("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}):e._e(),t("el-table-column",{attrs:{align:"center",prop:"sno",label:"学号",width:"200"}}),t("el-table-column",{attrs:{align:"center",prop:"sname",label:"姓名",width:"225"}}),t("el-table-column",{attrs:{align:"center",prop:"gender",label:"性别",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.gender?"男":"女")+" ")]}}])}),t("el-table-column",{attrs:{align:"center",prop:"sgrade",label:"年级",width:"100"}}),t("el-table-column",{attrs:{align:"center",prop:"sclass",label:"班级"}}),"manager"===e.userData.role||"teacher"===e.userData.role?t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getstudentTable(a.row.sno)}}},[e._v("学生详情")]),"manager"===e.userData.role?t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getstudentForm(a.row)}}},[e._v("修改")]):e._e(),"manager"===e.userData.role?t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.confirmDelete(a.row.sno)}}},[e._v("删除")]):e._e()]}}],null,!1,1264618810)}):e._e()],1),t("br"),"manager"===e.userData.role?t("el-button",{on:{click:function(t){return e.batchDelete()}}},[e._v("批量删除")]):e._e(),"manager"===e.userData.role?t("el-button",{on:{click:function(t){return e.deselect()}}},[e._v("取消选择")]):e._e(),"manager"===e.userData.role?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAddForm=!0}}},[e._v("添加学生")]):e._e(),t("el-dialog",{attrs:{title:"学生信息",visible:e.showTable},on:{"update:visible":function(t){e.showTable=t}}},[t("el-table",{attrs:{data:e.studentTable,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sno",label:"学号",width:"200"}}),t("el-table-column",{attrs:{align:"center",prop:"sname",label:"姓名",width:"225"}}),t("el-table-column",{attrs:{align:"center",prop:"gender",label:"性别",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.gender?"男":"女")+" ")]}}])}),t("el-table-column",{attrs:{align:"center",prop:"sgrade",label:"年级",width:"103"}}),t("el-table-column",{attrs:{align:"center",prop:"sage",label:"年龄",width:"100"}})],1),t("el-table",{attrs:{data:e.studentTable,border:""}},[t("el-table-column",{attrs:{align:"center",prop:"sdept",label:"院系",width:"100"}}),t("el-table-column",{attrs:{align:"center",prop:"sclass",label:"班级",width:"100"}}),t("el-table-column",{attrs:{align:"center",prop:"sloc",label:"宿舍",width:"100"}}),t("el-table-column",{attrs:{align:"center",prop:"email",label:"电子邮箱"}})],1)],1),t("el-dialog",{attrs:{title:"添加学生",visible:e.showAddForm},on:{"update:visible":function(t){e.showAddForm=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.form,"default-file-list":e.form,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"学号","label-width":"75px",prop:"sno"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sno,callback:function(t){e.$set(e.form,"sno",t)},expression:"form.sno"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名","label-width":"75px",prop:"sname"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sname,callback:function(t){e.$set(e.form,"sname",t)},expression:"form.sname"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别","label-width":"75px",prop:"gender"}},[t("el-select",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[t("el-option",{attrs:{label:"男",value:"1"}}),t("el-option",{attrs:{label:"女",value:"0"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年级","label-width":"75px",prop:"sgrade"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sgrade,callback:function(t){e.$set(e.form,"sgrade",t)},expression:"form.sgrade"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄","label-width":"75px",prop:"sage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sage,callback:function(t){e.$set(e.form,"sage",t)},expression:"form.sage"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"专业","label-width":"75px",prop:"sdept"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sdept,callback:function(t){e.$set(e.form,"sdept",t)},expression:"form.sdept"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"班级","label-width":"75px",prop:"sclass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sclass,callback:function(t){e.$set(e.form,"sclass",t)},expression:"form.sclass"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"宿舍","label-width":"75px",prop:"sloc"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.sloc,callback:function(t){e.$set(e.form,"sloc",t)},expression:"form.sloc"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"邮箱","label-width":"75px",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("el-form-item",{attrs:{type:"flex",justify:"center"}},[t("el-button",{on:{click:function(t){e.showAddForm=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.postStudent("addForm")}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{ref:"putform",attrs:{title:"修改学生",visible:e.showForm},on:{"update:visible":function(t){e.showForm=t}}},[t("el-form",{ref:"putForm",attrs:{model:e.putForm,"default-file-list":e.putForm,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"学号","label-width":"75px",prop:"sno"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sno,callback:function(t){e.$set(e.putForm,"sno",t)},expression:"putForm.sno"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名","label-width":"75px",prop:"sname"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sname,callback:function(t){e.$set(e.putForm,"sname",t)},expression:"putForm.sname"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别","label-width":"75px",prop:"gender"}},[t("el-select",{model:{value:e.putForm.gender,callback:function(t){e.$set(e.putForm,"gender",t)},expression:"putForm.gender"}},[t("el-option",{attrs:{label:"男",value:"1"}}),t("el-option",{attrs:{label:"女",value:"0"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年级","label-width":"75px",prop:"sgrade"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sgrade,callback:function(t){e.$set(e.putForm,"sgrade",t)},expression:"putForm.sgrade"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄","label-width":"75px",prop:"sage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sage,callback:function(t){e.$set(e.putForm,"sage",t)},expression:"putForm.sage"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"专业","label-width":"75px",prop:"sdept"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sdept,callback:function(t){e.$set(e.putForm,"sdept",t)},expression:"putForm.sdept"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"班级","label-width":"75px",prop:"sclass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sclass,callback:function(t){e.$set(e.putForm,"sclass",t)},expression:"putForm.sclass"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"宿舍","label-width":"75px",prop:"sloc"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.sloc,callback:function(t){e.$set(e.putForm,"sloc",t)},expression:"putForm.sloc"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:"邮箱","label-width":"75px",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.putForm.email,callback:function(t){e.$set(e.putForm,"email",t)},expression:"putForm.email"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showForm=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.putStudent("putForm")}}},[e._v("确 定")])],1)],1),t("br"),t("br"),t("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, total","current-page":e.currentPage,total:e.totalRows,"page-size":e.pageSize,"page-sizes":[5,10]},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-footer",{staticStyle:{display:"flex","justify-content":"right","align-items":"center","font-size":"12px","background-color":"rgb(84, 92, 100)",height:"25px"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("关于我们")]),t("el-dialog",{attrs:{title:"开发人员信息",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-table",{attrs:{data:e.gridData}},[t("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名",width:"150"}}),t("el-table-column",{attrs:{align:"center",prop:"text",label:"负责任务",width:"200"}}),t("el-table-column",{attrs:{align:"center",prop:"aaa",label:"组长/组员",width:"200"}})],1)],1)],1)],1)],1)],1)],1)},s=[],r=(a(560),a(1076)),o={data(){return{gridData:[{name:"喻卓",text:"前端开发",aaa:"组长"},{name:"汪涛",text:"后端开发",aaa:"组员"},{name:"詹培凯",text:"前端开发",aaa:"组员"},{name:"杨勃坤",text:"后端开发",aaa:"组员"}],userData:{role:"",uno:"",name:""},searchForm:{sno:"",sname:""},form:{sno:"",sname:"",gender:"",sgrade:"",sage:"",sdept:"",sclass:"",sloc:"",email:""},putForm:[{sno:"",sname:"",gender:"",sgrade:"",sage:"",sdept:"",sclass:"",sloc:"",email:""}],rules:{sno:[{required:!0,message:"请输入学生学号",trigger:"blur"},{min:8,max:8,message:"长度为8位数",trigger:"blur"}],sname:[{required:!0,message:"请输入学生姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],sgrade:[{required:!0,message:"请输入学生年级",trigger:"blur"}],sage:[{required:!0,message:"请输入学生年龄",trigger:"blur"}],sdept:[{required:!0,message:"请输入学生学院",trigger:"blur"}],sclass:[{required:!0,message:"请输入学生班级",trigger:"blur"}],sloc:[{required:!0,message:"请输入学生住址",trigger:"blur"}],email:[{required:!1,trigger:"blur"}]},dialogTableVisible:!1,showAddForm:!1,showForm:!1,showTable:!1,allStudents:[],studentTable:[],currentPage:1,pageSize:5,total:100}},methods:{handleCommand(e){"logout"===e&&(this.$router.push("/UserLogin"),console.log("用户点击了退出登录"))},async searchStudentTable(){this.searchForm.sno&&this.searchForm.sname?r.Z.get(`/Student?sno=${this.searchForm.sno}&sname=${this.searchForm.sname}`).then((e=>{this.studentTable=e.data.data,this.$message.success("查询成功"),this.openDialogTable()})):this.searchForm.sno&&!this.searchForm.sname?r.Z.get(`/Student?sno=${this.searchForm.sno}`).then((e=>{this.studentTable=e.data.data,this.$message.success("查询成功"),this.openDialogTable()})):!this.searchForm.sno&&this.searchForm.sname?r.Z.get(`/Student?sname=${this.searchForm.sname}`).then((e=>{this.studentTable=e.data.data,this.$message.success("查询成功"),this.openDialogTable()})):this.$message.error("输入不可皆为空")},async getstudentTable(e){e?r.Z.get(`/Student?sno=${e}`).then((e=>{this.studentTable=e.data.data,this.openDialogTable()})):this.$message.error("输入不可为空")},getstudentForm(e){this.putForm=e,this.openDialogForm()},async putStudent(e){this.$refs[e].validate((t=>{if(t){try{const t=e;r.Z.put(`/Student?sno=${t.sno}`,t),console.log("数据提交成功！")}catch(a){console.error("数据提交失败：",a)}this.showForm=!1,this.refresh()}else this.$message.error("请完善表单内容")}))},async postStudent(e){this.$refs[e].validate((t=>{if(t){try{const t=e;r.Z.post(`/Student?sno=${t.sno}`,t),console.log("数据提交成功！")}catch(a){console.error("数据提交失败：",a)}this.showAddForm=!1,this.refresh()}else this.$message.error("请完善表单内容")}))},async deleteStudent(e){r.Z.delete(`/Student?sno=${e}`).then((e=>{console.log(e.data.data)})),this.refresh()},confirmDelete(e){this.$confirm("确认删除？").then((()=>{this.deleteStudent(e)})).catch((()=>{}))},refresh(){r.Z.get("/AllStudents").then((e=>{this.allStudents=e.data.data,this.$message.success("数据已更新")}))},batchDelete(){const e=this.$refs.studentTable.selection.map((e=>e.sno));0!==e.length?r.Z.delete(`/Student?snos=${e.join(",")}`).then((e=>{console.log(e),this.refresh(),this.$message.success("批量删除成功")})):this.$message.warning("请先选择要删除的学生")},deselect(){this.$refs.studentTable.clearSelection()},openDialogForm(){this.showForm=!0},openDialogTable(){this.showTable=!0},handleSizeChange(e){this.pageSize=e,this.currentPage=Math.ceil(this.currentPage*this.pageSize/e)},handleCurrentChange(e){this.currentPage=e}},computed:{totalRows(){return this.allStudents.length},paginatedStudentsData(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.allStudents.slice(e,t)}},mounted(){this.userData=this.$route.meta.userData,r.Z.get("/AllStudents").then((e=>{this.allStudents=e.data.data,this.$message.success("数据已更新")}))}},n=o,i=a(1001),u=(0,i.Z)(n,l,s,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=516.c2f65f48.js.map